{% extends "base.html" %}
{% block page_title %}Авторизация{% endblock %}
{% block body %}
<body style="background-color: #f8f9fa;">
  <div class="d-flex justify-content-center align-items-center vh-100">
    <div class="card shadow-sm p-4" style="width: 400px; border-radius: 12px;">
      <h1 class="text-center mb-4">Авторизация</h1>
      <form method="post" id="loginForm">
        <!-- Имя пользователя -->
        <div class="form-floating mb-3">
          <input type="text" class="form-control" id="username" name="username" placeholder="Имя пользователя" required>
          <label for="username">Имя пользователя</label>
        </div>
        <!-- Пароль -->
        <div class="form-floating mb-4">
          <input type="password" class="form-control" id="password" name="password" placeholder="Пароль" required>
          <label for="password">Пароль</label>
        </div>

        <!-- Ссылка -->
        <div class="mb-3 text-center">
          <a href="/register" class="text-decoration-none">Зарегистрироваться</a>
        </div>
        <!-- Кнопка -->
        <button type="submit" id="loginSubmitBtn" class="btn btn-primary w-100 py-2 d-flex align-items-center justify-content-center">
          <span id="spinner" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true" style="display: none;"></span>
          <span id="buttonText">Войти</span>
        </button>
      </form>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById("loginForm").addEventListener("submit", function (e) {
      const button = document.getElementById("loginSubmitBtn");
      const spinner = document.getElementById("spinner");
      const buttonText = document.getElementById("buttonText");

      // Показываем спиннер и блокируем кнопку
      spinner.style.display = "inline-block";
      buttonText.textContent = "Загрузка...";
      button.disabled = true;

      // Имитация задержки загрузки (например, 2 секунды)
      setTimeout(() => {
        this.submit(); // Отправляем форму после задержки
      }, 2000);

      // Предотвращаем немедленную отправку формы
      e.preventDefault();
    });
  </script>
</body>
{% endblock %}
